var hive=angular.module("unionVillage.controllers",[]);hive.controller("LoginCtrl",function(i,e,o){function n(i){switch(i.provider){case"password":return i.password.email.replace(/@.*/,"");case"twitter":return i.twitter.displayName;case"facebook":return i.facebook.displayName}}var t=new Firebase("https://unionvillage.firebaseio.com/"),a=new Firebase("https://unionvillage.firebaseio.com/"),r=a.getAuth();r?(console.log("User "+r.uid+" is logged in with "+r.provider),o.go("unionVillage.dashboard")):(console.log("User is logged out"),o.go("unionVillage.login")),i.login=function(i,e){t.authWithPassword({email:i,password:e},function(i){i?console.log("Login Failed!",i):o.go("unionVillage.dashboard")})};var s=!0,l=new Firebase("https://unionvillage.firebaseio.com/");l.onAuth(function(i){i&&s&&l.child("users").child(i.uid).set({provider:i.provider,name:n(i)})}),i.logout=function(){t.unauth(),o.go("unionVillage.login")}}),hive.controller("threadCtrl",function(i,e,o){function n(o){i.todos=e(a)}var t=new Firebase("https://unionvillage.firebaseio.com/"),a=new Firebase("https://unionvillage.firebaseio.com/posts");a.on("value",function(i){o(function(){n(i),console.log(i)})});var r=t.child("posts");i.addItem=function(){var e=(new Date).valueOf();r.push({id:e,description:i.postDescription,liked:!1}),i.postDescription=""},i.changeStatus=function(i){var e=new Firebase(t+i.id);e.update({id:i.id,description:i.description})}});