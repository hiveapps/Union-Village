var unionVillage=angular.module("unionVillage.controllers",[]);unionVillage.controller("LoginCtrl",function(i,o,e){function n(i){switch(i.provider){case"password":return i.password.email.replace(/@.*/,"");case"twitter":return i.twitter.displayName;case"facebook":return i.facebook.displayName}}var t=new Firebase("https://unionvillage.firebaseio.com/"),a=new Firebase("https://unionvillage.firebaseio.com/"),l=a.getAuth();l?(console.log("User "+l.uid+" is logged in with "+l.provider),e.go("unionVillage.dashboard")):(console.log("User is logged out"),e.go("unionVillage.login")),i.login=function(i,o){t.authWithPassword({email:i,password:o},function(i){i?console.log("Login Failed!",i):e.go("unionVillage.dashboard")})};var r=!0,s=new Firebase("https://unionvillage.firebaseio.com/");s.onAuth(function(i){i&&r&&s.child("users").child(i.uid).set({provider:i.provider,name:n(i)})}),i.logout=function(){t.unauth(),e.go("unionVillage.login")}}),unionVillage.controller("threadCtrl",function(i,o,e){function n(e){i.todos=o(a)}var t=new Firebase("https://unionvillage.firebaseio.com/"),a=new Firebase("https://unionvillage.firebaseio.com/posts");a.on("value",function(i){e(function(){n(i),console.log(i)})});var l=t.child("posts");i.addItem=function(){var o=(new Date).valueOf();l.push({id:o,description:i.postDescription,liked:!1}),i.postDescription=""},i.changeStatus=function(i){var o=new Firebase(t+i.id);o.update({id:i.id,description:i.description})}}),unionVillage.controller("headerController",function(i,o){i.isActive=function(i){return i===o.path()}});